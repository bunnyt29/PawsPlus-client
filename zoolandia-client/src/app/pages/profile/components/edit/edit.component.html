<img class="profile-decoration-left" src="/images/desktop/profile/profile-left-blob.svg" alt="decoration">
<img class="profile-decoration-right" src="/images/desktop/profile/profile-right-blob.svg" alt="decoration">
<img (click)="backClicked()" class="arrow-back" src="/images/desktop/arrow-left.svg" alt="Върни се обратно">
<section class="create-profile-holder">
  <form [formGroup]="profileForm">
    <div class="create-profile-head">
      <div class="profile-image">
        <app-image-upload [defaultImage]="defaultImage"
                          (fileSelected)="onFileUpload($event)">

        </app-image-upload>
      </div>
      <span class="profile-name-holder">
            <input placeholder="Иванов"
                   class="profile-name profile-input"
                   [ngClass]="{'invalid-input': firstName?.touched && firstName?.invalid}"
                   type="text"
                   formControlName="firstName">
            <div class="alert"
             *ngIf="firstName?.touched && firstName?.errors?.['required']">
              * задължително
            </div>
            <div class="alert"
                 *ngIf="firstName?.touched && firstName?.errors?.['minlength']">
              * минимален брой символи 2
            </div>
            <input placeholder="Иванов"
                   class="profile-name profile-input"
                   [ngClass]="{'invalid-input': firstName?.touched && firstName?.invalid}"
                   type="text"
                   formControlName="lastName">
            <div class="alert"
                 *ngIf="lastName?.touched && lastName?.errors?.['required']">
              * задължително
            </div>
            <div class="alert"
                 *ngIf="lastName?.touched && lastName?.errors?.['minlength']">
              * минимален брой символи 2
            </div>
      </span>
    </div>
    <div class="create-profile-main">
      <div class="create-profile-main-left-side">
        <div class="additional-information">
          <div class="form-group">
            <div class="form-sections-heading">
              <img src="/images/shared/additional-description.svg" alt="additional-information">
              <span>Допълнително описание</span>
            </div>
            <textarea class="main-textarea"
                      placeholder="Опиши себе си така, че да привлечеш вниманието на нашите собственици"
                      formControlName="description"
                      rows="8">
            </textarea>
            <div class="alert" *ngIf="profileForm.get('description')?.touched && profileForm.get('description')?.errors?.['maxlength']">
              * максимум 1024 символа
            </div>
          </div>
        </div>
        <div class="contacts">
          <div class="form-sections-heading">
            <img src="/images/shared/contacts-icon.svg" alt="contacts">
            <span>Контакти</span>
          </div>
          <div class="contacts-main-holder">
            <div class="contact">
              <label>Телефонен номер</label>
              <input class="profile-input main-input"
                     [ngClass]="{'invalid-input': phoneNumber?.touched && phoneNumber?.invalid}"
                     type="text"
                     placeholder="0888990865"
                     formControlName="phoneNumber">
              <div *ngIf="phoneNumber?.touched && phoneNumber?.errors?.['required']" class="alert">* задължително</div>
              <div *ngIf="phoneNumber?.touched && phoneNumber?.errors?.['pattern']" class="alert">* въведи валиден телефонен номер</div>
            </div>
          </div>
        </div>

        <div class="location">
          <div class="form-group">
            <div class="form-sections-heading">
              <img src="/images/shared/location-icon.svg" alt="location">
              <span>Местоположение</span>
            </div>
            <div
              class="location-holder"
              [ngClass]="{'invalid-location': profileForm.get('location')?.touched &&
                        profileForm.get('location')?.invalid}"
            >
              <label>Адрес:</label>
              <google-autocomplete
                [inputValue]="formattedAddress"
                (placeSelected)="handlePlaceSelected($event)"
                (input)="handleInputChange($event)"
                (blur)="profileForm.get('location')?.markAsTouched()">
              </google-autocomplete>

              <div class="alert"
                   *ngIf="profileForm.get('location')?.touched &&
              profileForm.get('location')?.errors?.['required']">
                * задължително поле
              </div>

              <google-map [height]="'300px'" [width]="'100%'" [options]="mapOptions">
                <map-advanced-marker
                  *ngIf="markerPosition"
                  [position]="markerPosition">
                </map-advanced-marker>
              </google-map>
            </div>

          </div>
        </div>
      </div>
      <div class="create-profile-main-right-side">
        <div class="sitter-owner-option-holder">
          <div *ngIf="profile.roles?.includes('Owner')"
               (click)="navigateToPetCreation()"
               class="add">
            <img src="/images/shared/add-animal.svg" alt="Add button">
            <span>Добави домашен любимец</span>
          </div>
          <div *ngIf="profile.roles?.includes('Sitter')" routerLink="/profile/my-profile-details/my-post" class="add">
            <img src="/images/shared/add-service.png" alt="Add button">
            <span>Създай първата си услуга</span>
          </div>
        </div>
      </div>
    </div>
    <div class="right-button-holder">
      <button class="btn secondary-button"
              (click)="editProfile()">
        Завърши
      </button>
    </div>
  </form>
</section>
